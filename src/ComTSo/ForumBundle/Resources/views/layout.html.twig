<!DOCTYPE html>
<html lang="{{ app.request.locale }}">
<head>
	<meta charset="{{ _charset }}">
	<title>{% block title %}ComTSo{{ title is defined ? ' - ' ~ title }}{% endblock %}</title>
	{% block metas %}
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="ComTSo">
        <meta name="author" content="">
    {% endblock %}
	{% block stylesheets %}
		<!--[if lt IE 10]>
			{% javascripts 'bundles/comtsoforum/js/modernizr.custom.min.js' %}
				<script type="text/javascript" src="{{ asset_url }}"></script>
			{% endjavascripts %}
		<![endif]-->
		{% stylesheets
				'bundles/comtsoforum/css/comtso.css'
				'bundles/comtsoforum/css/bootstrap-lumen.min.css'
				%}
			<link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
		{% endstylesheets %}
		<link href="//fonts.googleapis.com/css?family=Port+Lligat+Slab" type="text/css" rel="stylesheet">
    {% endblock %}
</head>
<body>
    <div class="container">
		{% block main_content %}
			{% block main_menu %}
				<div class="navbar navbar-default hidden-print" role="navigation">
					<div class="container-fluid">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<a class="navbar-brand" href="{{ path('comtso_homepage') }}">ComTSo</a>
						</div>
						<div class="navbar-collapse collapse">
							<ul class="nav navbar-nav">
								{% set activeMenu = activeMenu is defined ? activeMenu : 'home' %}
								<li{{ activeMenu == 'home' ? ' class="active"' }}><a href="{{ path('comtso_homepage') }}">Home</a></li>
								<li{{ activeMenu == 'forums' ? ' class="active"' }}><a href="{{ path('comtso_forum_show', {id: 'le-bac-a-sable'}) }}">Le forum</a></li>
								<li{{ activeMenu == 'albums' ? ' class="active"' }}><a href="#">Les albums</a></li>
								<li{{ activeMenu == 'people' ? ' class="active"' }}><a href="{{ path('comtso_user_list') }}">Les gens</a></li>
								<li style="display:none;"><a href="#chat" id="chat-toggle">Chat</a></li>
							</ul>
							<form action="{{ path('comtso_search') }}" method="get" class="navbar-form navbar-left" role="search">
								<div class="form-group">
									<input type="text" name="q" class="form-control" placeholder="Recherche" value="{% block search_value %}{% endblock %}">
									<span class="input-group-btn"></span>
								</div>
								<button type="submit" class="btn btn-default"><i class="icon-search"></i></button>
							</form>
							<ul class="nav navbar-nav navbar-right">
								<li><a href="{{ app.user|path }}"><i class="icon-user"></i> {{ app.user }}</a></li>
								<li><a href="{{ path('fos_user_security_logout') }}"><i class="icon-log-out"></i></a></li>
							</ul>
						</div>
					</div>
				</div>
			{% endblock %}
			<div class="container-fluid">
				{% block messages %}
					{% for name in ['error', 'warning', 'success', 'info'] %}
						{% for message in app.session.flashBag.get(name) %}
							<div class="alert alert-{{ name }}">
							  <button type="button" class="close" data-dismiss="alert">&times;</button>
							  {{ message|raw }}
							</div>
						{% endfor %}
					{% endfor %}
				{% endblock %}
				<div class="row" id="main-content">
					<div class="col-md-8" role="main">
						{% block content %}{% endblock %}
					</div>
					<div class="col-md-4" class="hidden-print affix" role="complementary">
						{% block aside %}{% endblock %}
						<hr>
						{% include 'ComTSoForumBundle:Quote:random.html.twig' %}
					</div>
				</div>
				{% include 'ComTSoForumBundle:Chat:chat_panel.html.twig' %}
			</div>
		{% endblock %}
    </div>
	{% block javascripts %}
		<script>
			var CKEDITOR_BASEPATH = '/bundles/comtsoforum/js/ckeditor/';
		</script>
		{% javascripts
			'assets/jquery/jquery.min.js'
			'bundles/fosjsrouting/js/router.js'
			'@MopaBootstrapBundle/Resources/public/bootstrap-sass/vendor/assets/javascripts/bootstrap/tooltip.js'
			'@MopaBootstrapBundle/Resources/public/bootstrap-sass/vendor/assets/javascripts/bootstrap/*.js'
			'@MopaBootstrapBundle/Resources/public/js/mopabootstrap-collection.js'
			'@MopaBootstrapBundle/Resources/public/js/mopabootstrap-subnav.js'
			'bundles/comtsoforum/js/ckeditor/ckeditor.js'
			'bundles/comtsoforum/js/ckeditor/adapters/jquery.js'
			'bundles/comtsoforum/js/moment.min.js'
			'bundles/comtsoforum/js/common.js'
			%}
			<script type="text/javascript" src="{{ asset_url }}"></script>
		{% endjavascripts %}
		<script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>
		<script>
			var chat_url = '{{ path('comtso_chat') }}';
			var user_url = '{{ path('comtso_user_show', {usernameCanonical: '-place-holder-'}) }}';
			$(document).ready(function(){
				moment.lang('fr');
			});
		</script>
    {% endblock %}
</body>
</html>
